<!-- dashboard.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Äî Miyamoto</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
</head>
<body class="bg-black text-white flex flex-col items-center min-h-screen p-6">

  <div class="max-w-2xl w-full bg-gray-900 p-6 rounded-xl shadow-xl mt-10 text-center">
    <h1 class="text-3xl font-bold mb-4">üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
    <p id="wallet" class="text-purple-400 mb-2">Solana: ...</p>
    <p id="balance" class="text-xl mb-2">üí∞ –ë–∞–ª–∞–Ω—Å: 0 $MIYAMOTO</p>
    <p id="miningTime" class="text-gray-400">‚è±Ô∏è –û–±—â–µ–µ –≤—Ä–µ–º—è –º–∞–π–Ω–∏–Ω–≥–∞: 0 –º–∏–Ω.</p>

    <a href="mining.html" class="inline-block mt-6 bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-lg font-semibold transition">
      üîß –ü–µ—Ä–µ–π—Ç–∏ –∫ –º–∞–π–Ω–∏–Ω–≥—É
    </a>
  </div>

  <footer class="mt-12 text-sm text-gray-500">
    Miyamoto Project ¬© 2025
  </footer>

  <script>
    // Firebase –∫–æ–Ω—Ñ–∏–≥
    const firebaseConfig = {
      apiKey: "AIzaSyBWWqOaYvDtjtMynOwZ3hRy5vt2nmzMgFM",
      authDomain: "miyamoto-project.firebaseapp.com",
      projectId: "miyamoto-project",
      storageBucket: "miyamoto-project.firebasestorage.app",
      messagingSenderId: "266668256982",
      appId: "1:266668256982:web:64957d8c366d80b1196377",
      measurementId: "G-VSQJLR6GR9"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const wallet = localStorage.getItem("wallet");

    if (!wallet) {
      alert("–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞.");
      window.location.href = "login.html";
    } else {
      document.getElementById("wallet").textContent = "Solana: " + wallet;

      const userRef = db.ref("users/" + wallet);

      userRef.on("value", (snapshot) => {
        const data = snapshot.val();
        if (data) {
          document.getElementById("balance").textContent = `üí∞ –ë–∞–ª–∞–Ω—Å: ${data.balance || 0} $MIYAMOTO`;
          const minutes = Math.floor((data.totalMiningTime || 0) / 60);
          document.getElementById("miningTime").textContent = `‚è±Ô∏è –û–±—â–µ–µ –≤—Ä–µ–º—è –º–∞–π–Ω–∏–Ω–≥–∞: ${minutes} –º–∏–Ω.`;
        }
      });
    }
  </script>
</body>
</html>
